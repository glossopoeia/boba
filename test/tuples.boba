
func nil = tuple { }

func one-elem = tuple { 2 } 2

func with-data = tuple { 1, True }

func ext r = tuple { ...r with False, 2, 1.2 }

func fst =
    match {
        | tuple { b... a } => a
    }

func snd =
    match {
        | tuple { c... b a } => b
    }

func fstFst =
    match {
        | tuple { b... tuple { c... a } } => a
    }

func tail =
    match {
        | tuple { b... a } => tuple { ... b }
    }

func print-tuple =
    "(" print
    for e <= tuple then {
        e print
        ", " print
    }
    ")" print

func map-tuple f =
    for e <= tuple map tuple, tuple then {
        let x = e f do;
        x x
    }

func all-tuple =
    for e <= tuple fold res <= True then {
        res e and-bool
    }

func extracting =
    tuple { 0 } fst
    tuple { 2, 0, 1 } snd
    add-i32

//main = tuple { "hello", "printed", "tuples!" } print-tuple extracting
//main = tuple { true, false, true } all-tuple conv-bool-i32
main = {
    tuple { "hello", "printed", "tuples" } ("!" concat-string) map-tuple print-tuple;
    let x;
    0
}
    