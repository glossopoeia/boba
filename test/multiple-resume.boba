
effect amb!
    = flip! : ===[ e..., amb! ][ p... ][ t ]==> Bool^s

main =
    handle {
        let x = flip!;
        let y = flip!;
        x y neq-bool
    } with {
        | flip! => {
              let x = False resume;
              let y = True resume;
              x y append-list
          }
        | after v => [v]
    }
    drop 0